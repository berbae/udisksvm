The udisksvm script operates between udisks and a window manager with a mouse and a system tray available.
It listens to uevents and if the conditions are met it mounts a removable media and passes the control to Traydevice in the GUI.
Traydevice is a little desktop application displaying systray icon and allowing to execute custom commands on the specified device.
It can be find in the Arch User Repository (AUR) : https://aur.archlinux.org/packages.php?ID=32005

udisks------->udisksvm-------->traydevice-------->systray icons
                 |                                     |
                 |                                     |
                 V                                     V
            automounting                        right-click menu
       (non optical disks only)                        |
                                                       |
                                                       V
					    commands to device media

The automounting is now only activated for non-optical disks.

In its present form it is simple and it only manages mounting/unmounting of removable devices or eject unmounted optical disks,
using only mouse clicks.

The text tip when the mouse pointer is on the systray icon gives the folder in /media where the media can be accessed in a file manager
after it has been mounted.

The configuration file for traydevice is now /usr/share/udisksvm/udisksvm.xml
There is no need to copy it in $HOME/.config, as the -c option of traydevice is now used.
It can be edited under root to add other commands on more complicated conditions.

The script works without hal but IT NEEDS DBUS RUNNING.
So dbus should be present in the DAEMONS line of /etc/rc.conf file.

Here is an example of using it with Openbox WM and Tint2 with systray enabled.

To initiate a ConsoleKit session and a dbus instance, Openbox is started with :

	exec ck-launch-session dbus-launch openbox-session

In $HOME/.config/openbox/autostart these lines are needed :

	# Detection of insertion of an optical disk
	if ! pgrep -lf "udisks-daemon: polling /dev/sr0"; then
	    udisks --poll-for-media /dev/sr0
	fi

	udisksvm >/dev/null &

The mount options in udisksvm script can be changed, and other file system types can be added with specific options as well.
These file system types and options for mounting should be reported in the udisksvm.xml configuration file of traydevice,
for it to correctly mount the devices in its right-click menu.

This method can be considered as a starting point to a more complete management of removable media in a GUI oriented approach.
But it can also be used as is, to simply manage automounting, un-mounting and re-mounting of, for example, mass storage USB devices,
or for accessing data on optical CD/DVD disks.
